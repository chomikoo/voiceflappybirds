(function(){'use strict';function a(){s.drawImage(y,r.width/2-y.width/2,50),s.drawImage(z,r.width/2-y.width/2,r.height-z.height-v.height)}function b(){n-=25}function c(){B--,B<=-r.width&&(B=0),s.drawImage(v,B,r.height-v.height,r.width,v.height),s.drawImage(v,B+r.width,r.height-v.height,r.width,v.height)}function d(){l=!l,e(),l?o=n:n=o}function e(){s.drawImage(u,0,0);for(let a=0;a<C.length;a++)s.drawImage(w,C[a].x,C[a].y),s.drawImage(x,C[a].x,C[a].y+A),C[a].x--,C[a].x==r.width-200&&(C.push({x:r.width,y:Math.floor(Math.random()*w.height)-w.height}),console.log(C)),(m+t.width>=C[a].x&&m<=C[a].x+w.width&&(n<=C[a].y+w.height||n+t.height>=C[a].y+A)||n+t.height>=r.height-v.height)&&location.reload(),5==C[a].x&&q++;c(),s.drawImage(t,m,n),n+=p,s.fillStyle='#000',s.font='20px Verdana',s.fillText('Score : '+q,10,r.height-20),s.fillStyle='#000',s.font='20px Verdana',s.fillText('Vol level: '+f(k),r.width-150,r.height-20),l?a():requestAnimationFrame(e)}var f=Math.round;let g=null,h=null,i=null,j=null,k=null,l=!0,m=10,n=50,o=n,p=1.5,q=0;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(a){g=new AudioContext,h=g.createAnalyser(),i=g.createMediaStreamSource(a),j=g.createScriptProcessor(2048,1,1),h.smoothingTimeConstant=0.1,h.fftSize=1024,i.connect(h),h.connect(j),j.connect(g.destination);document.getElementById('canvas').getContext('2d');j.onaudioprocess=function(){let a=new Uint8Array(h.frequencyBinCount);h.getByteFrequencyData(a);let c=0,d=a.length;for(let b=0;b<d;b++)c+=a[b];k=c/d,30<=f(k)&&(console.log('Up!'),b())}},function(a){console.log(a)}):console.log('getUserMedia not supported'),window.addEventListener('load',e,!0);const r=document.getElementById('canvas'),s=r.getContext('2d'),t=new Image,u=new Image,v=new Image,w=new Image,x=new Image,y=new Image,z=new Image;t.src='images/plane.png',u.src='images/flappybg.png',w.src='images/pT.png',x.src='images/pB.png',v.src='images/fg.png',y.src='images/start.png',z.src='images/controls.png';const A=w.height+150;let B=0;document.addEventListener('keydown',(a)=>{32===a.keyCode&&b()}),document.addEventListener('keydown',(a)=>{13===a.keyCode&&d()}),document.addEventListener('click',d);let C=[];C[0]={x:r.width,y:-r.height/4}})();